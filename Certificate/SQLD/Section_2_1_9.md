# 조인 (JOIN)

## JOIN 개요

* 두 개 이상의 테이블 들을 연결 또는 결합하여 데이터를 출력하는 것
* 관계형 데이터베이스의 가장 큰 장점이면서 대표적인 핵심 기능
* 일반적으로 PK나 FK 값의 연관에 의해 성립
  * 어떤 경우에는 PK, FK 관계가 없어도 논리적인 값들의 연관만으로 성립 가능
* FROM 절에 여러 테이블이 나열되더라도 SQL 에서 데이터를 처리할 때는 단 두개의 집합 간에만 JOIN이 발생
  * FROM A, B, C라면 A, B가 먼저 조인되고 이후 결과물과 C가 조인됨
  * 테이블의 조인 순서는 옵티마이저에 의해서 결정

## EQUI JOIN

* 두 개의 테이블 간에 칼럼 값들이 서로 정확하게 일치하는 경우에 사용되는 방법

  * 대부분 PK <-> FK의 관계를 기반
  * 하지만 반드시 PK <-> FK의 관계로만 EQUI JOIN이 성립하는 것은 아님

* 계층형이나 망형 데이터베이스와 비교해서 관계형 데이터베이스의 큰 장점

* JOIN 조건은 WHERE절에 기술

  * `=` 연산자를 사용해서 표현

* 대략적인 형태

  ```SQL
  SELECT 테이블1.칼럼명, 테이블2.칼럼명, ...
  FROM 테이블1, 테이블2
  WHERE 테이블1.칼럼명1 = 테이블2.칼럼명2;
  ```

  * 특정 칼럼에 접근하기 위해 그 칼럼이 어느 테이블에 존재하는 칼럼인지를 명시하는 것
    * 모든 테이블에 칼럼들이 유일한 이름을 가진다면 상관없지만, JOIN에 사용되는 두 개의 테이블에 같은 칼럼명이 존재할 수 있음
      * DBMS의 옵티마이저는 어떤 칼럼을 사용해야 할지 모르기 때문에 파싱 단계에서 에러 발생
    * 개발자나 사용자가 조회할 데이터가 어느 테이블에 있는 칼럼을 말하는 것인지 쉽게 알수 있게 함
      * SQL에 대한 가독성이나 유지보수성을 높이는 효과

* 조인 조건에 맞는 데이터만 출력하는 INNER JOIN

  * 참여하는 대상 테이블이 N개라면, JOIN 조건은 N-1개 이상이 필요

* FROM 절의 테이블에 ALIAS를 사용 가능

  * FROM 절의 테이블에 ALIAS를 적용했다면 WHERE 절과 SELECT 절에 적용된 ALIAS 명으로 된 테이블을 사용해야 함

## Non EQUI JOIN

* 두 개의 테이블 간에 칼럼 값들이 서로 정확하게 일치하지 않는 경우에 사용

* `=` 연산자가 아닌 다른 (`Between`, `>`, `>=`, `<`, `<=` 등) 연산자들을 사용하여 JOIN을 수행하는 것

* 대략적인 형태

  ```SQL
  SELECT 테이블1.칼럼명, 테이블2.칼럼명, ...
  FROM 테이블1, 테이블2
  WHERE 테이블1.칼럼명1 BETWEEN 테이블2.칼럼명1 AND 테이블2.칼럼명2;
  ```

  * BETWEEN은 한 사례

* 데이터 모델에 따라서 Non EQUI JOIN이 불가능한 경우도 존재