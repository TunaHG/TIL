# 조인 수행 원리

* 조인이란 두 개 이상의 테이블을 하나의 집합으로 만드는 연산
* FROM 절에 두 개 이상의 테이블이 나열될 경우 조인이 두 테이블 사이에서 수행

## NL Join

* 프로그래밍에서 사용하는 중첩된 반복문과 유사한 방식으로 조인을 수행
  * 반복문의 외부에 있는 테이블을 선행 테이블 또는 외부 테이블
  * 반복문의 내부에 있는 테이블을 후행 테이블 또는 내부 테이블
* NL Join은 랜덤 방식으로 데이터를 액세스하기 때문에 처리 범위가 좁은 것이 유리
* 작업 방법
  * 선행 테이블에서 주어진 조건을 만족하는 행을 찾음
  * 선행 테이블의 조인 키 값을 가지고 후행 테이블에서 조인 수행
  * 선 행 테이블의 조건을 만족하는 모든 행에 대해 1번 작업 반복 수행
* 추출버퍼
  * SQL문의 실행결과를 보관하는 버퍼
  * 일정 크기를 설정하여 추출버퍼에 결과가 모두 차거나 더 이상 결과가 없어서 추출버퍼를 채울 것이 없으면 결과를 사용자에게 반환
  * 운반단위, Array Size, Prefetch Size라고 함
* 조인이 성공하면 바로 조인 결과를 사용자에게 보여줄 수 있음

## Sort Merge Join

* 조인 칼럼을 기준으로 데이터를 정렬하여 조인을 수행
* 주로 스캔 방식으로 데이터를 읽음
* 랜덤 액세스
* 정렬할 데이터가 많아 메모리에서 모든 정렬 작업을 수행하기 어려운 경우에는 임시 영역을 사용하기 때문에 성능이 저하될 수 있음
* 대량의 조인 작업에서 CPU 작업 위주로 처리하는 Hash Join이 성능상 유리
  * 하지만 비동등 조인에 대해서도 조인 작업이 가능하다는 장점이 있음
* 조인 칼럼의 인덱스를 사용하지 않기 때문에 존재하지 않을경우에도 사용할 수 있는 조인 기법

## Hash Join

* 해슁 기법을 이용하여 조인을 수행
  * 해쉬 함수를 수행하여 서로 동일한 해쉬 값을 갖는 것들 사이에서 실제 값이 같은지를 비교하면서 조인을 수행
* NL Join의 랜덤 액세스 문제와 Sort Merge Join의 정렬 작업의 부담을 해결하기 위한 대안으로 등장
* 조인 칼럼의 인덱스를 사용하지 않기 때문에 존재하지 않을 경우에도 사용할 수 있는 조인 기법
* 해쉬함수를 이용하여 조인을 수행하기 때문에 동등 조인에서만 사용 가능